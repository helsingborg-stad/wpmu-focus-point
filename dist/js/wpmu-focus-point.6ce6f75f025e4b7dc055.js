(()=>{"use strict";var e={235:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(i(713)),r="data-js-focus-axis";document.addEventListener("DOMContentLoaded",()=>{wp&&wp.media&&wp.media.view&&wp.media.view.Modal&&wp.media.view.Modal.prototype.on("open",()=>{setTimeout(()=>{const e=document.querySelector(`input[${r}="x"]`),t=document.querySelector(`input[${r}="y"]`),i=document.querySelector("img.details-image:not(.icon)");if(i&&e&&t){const a=e.dataset.attachmentId,r=wp.media.attachment(a);if(!s(r))return;new n.default(i,e,t)}},300)})});const s=e=>!!e&&!!e.get("mime")&&e.get("mime").includes("image")&&!e.get("mime").includes("image/svg+xml")},713:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i){Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"focusX",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"focusY",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"defaultX",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"defaultY",{enumerable:!0,configurable:!0,writable:!0,value:50}),e.complete?this.init():e.addEventListener("load",()=>{this.init()})}init(){const[e,t,i]=this.structureMarkup();let a=parseFloat(this.focusX.value)||this.defaultX,n=parseFloat(this.focusY.value)||this.defaultY;this.updateMarkerPosition(a,n,i),this.image.addEventListener("click",e=>{const t=this.image.getBoundingClientRect(),a=e.offsetX/t.width*100,n=e.offsetY/t.height*100;this.updateMarkerPosition(a,n,i),this.focusX.value=a.toFixed(2),this.focusY.value=n.toFixed(2),this.focusX.dispatchEvent(new Event("change",{bubbles:!0})),this.focusY.dispatchEvent(new Event("change",{bubbles:!0}))})}updateMarkerPosition(e,t,i){i.style.left=`${e}%`,i.style.top=`${t}%`}structureMarkup(){const e=this.createDiv("wpmu-focus-point__container"),t=this.createDiv("wpmu-focus-point__image-wrapper"),i=this.createDiv("wpmu-focus-point__marker");return this.image.insertAdjacentElement("beforebegin",e),t.appendChild(this.image),e.appendChild(t),t.appendChild(i),[e,t,i]}createDiv(e){const t=document.createElement("div");return t.className=e,t}}}},t={};!function i(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,i),r.exports}(235)})();
//# sourceMappingURL=wpmu-focus-point.6ce6f75f025e4b7dc055.js.map